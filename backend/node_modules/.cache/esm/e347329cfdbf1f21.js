let express,mongoose,cors,socketio,upload,getSmall,getImage,CommentModel;_fdb‍.w("express",[["default",["express"],function(v){express=v}]]);_fdb‍.w("mongoose",[["default",["mongoose"],function(v){mongoose=v}]]);_fdb‍.w("cors",[["default",["cors"],function(v){cors=v}]]);_fdb‍.w("socket.io",[["default",["socketio"],function(v){socketio=v}]]);_fdb‍.w("./api/routes/upload",[["default",["upload"],function(v){upload=v}]]);_fdb‍.w("./api/routes/getSmall",[["default",["getSmall"],function(v){getSmall=v}]]);_fdb‍.w("./api/routes/getNormal",[["default",["getImage"],function(v){getImage=v}]]);_fdb‍.w("../models/commentModel",[["default",["CommentModel"],function(v){CommentModel=v}]]);







// import addComment from './api/routes/socketComment';


var app = express();
app.use(cors())

var connection = mongoose.connect('mongodb+srv://admin:password12345@wiogn-rcqw7.mongodb.net/test?retryWrites=true&w=majority', { useUnifiedTopology: true });
var db = mongoose.connection;

db.on('error', function () {
    console.log("MongoDB Error...");
});

db.once('open', function () {
    console.log("MongoDB Connection Sucessful!!!");
});

// Use Routes
app.use('/api/upload', upload);
app.use('/api/getsmall', getSmall);
app.use('/api/getimage', getImage);

var server = app.listen(8000, () => console.log('Listening on port 8000..'));



//socket part
var io = socketio(server);
// app.set('io', io);

io.on('connection', async (socket) => {
    console.log('a user connected');
    socket.on('disconnect', () => {
        console.log('user disconnected');
    });
});

