let express,mongoose,cors,path,upload,getSmall,getImage,socketComment;_f1c‍.w("express",[["default",["express"],function(v){express=v}]]);_f1c‍.w("mongoose",[["default",["mongoose"],function(v){mongoose=v}]]);_f1c‍.w("cors",[["default",["cors"],function(v){cors=v}]]);_f1c‍.w("path",[["default",["path"],function(v){path=v}]]);_f1c‍.w("./api/routes/upload",[["default",["upload"],function(v){upload=v}]]);_f1c‍.w("./api/routes/getSmall",[["default",["getSmall"],function(v){getSmall=v}]]);_f1c‍.w("./api/routes/getNormal",[["default",["getImage"],function(v){getImage=v}]]);_f1c‍.w("./api/routes/socketComment",[["default",["socketComment"],function(v){socketComment=v}]]);









var app = express();
app.use(cors())

var connection = mongoose.connect('mongodb+srv://admin:password12345@wiogn-rcqw7.mongodb.net/test?retryWrites=true&w=majority', { useUnifiedTopology: true });
var db = mongoose.connection;

db.on('error', function () {
    console.log("MongoDB Error...");
});

db.once('open', function () {
    console.log("MongoDB Connection Sucessful!!!");
});

// Use Routes
app.use('/api/upload', upload);
app.use('/api/getsmall', getSmall);
app.use('/api/getimage', getImage);

//Production mode here
app.use(express.static('frontend/build'));

app.get('*', (req, res) => {
    res.sendFile(path.resolve(__dirname, 'frontend', 'build', 'index.html'));
});


var server = app.listen(8000, () => console.log('Listening on port 8000..'));
var io = socketio(server);
socketComment(io);