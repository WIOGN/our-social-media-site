let Router,SmallImage;_097‍.x([["default",()=>_097‍.o]]);_097‍.w("express",[["Router",["Router"],function(v){Router=v}]]);_097‍.w("../models/small-image",[["default",["SmallImage"],function(v){SmallImage=v}]]);



var router = Router();

router.get('/', async (req, res) => {

    try {
        var allSmall = await SmallImage.find().sort({ date: -1 });

        var arr = allSmall.map(x => ({ name: x.name }));

        res.status(200).json(arr);
    }
    catch (err) {
        res.status(400).json({ msg: err.message });
    }
});

router.get('/:name', async (req, res) => {
    // console.log(req.params.name);
    try {
        var smallPicture = await SmallImage.findOne({ name: req.params.name })
        // console.log(smallPicture);
        if (!smallPicture) {
            throw Error("Can't Find image");
        }
        else {
            res.sendFile(smallPicture.path, { root: './' });
        }
    }
    catch (err) {
        res.status(400).json({ msg: err.message });
    }
});

_097‍.d(router);