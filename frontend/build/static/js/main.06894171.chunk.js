(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{132:function(e,t){},139:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},153:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(30),c=a.n(s),o=a(2),l=a.n(o),i=a(4),u=a(5),m=a(6),h=a(25),p=a(8),d=a(7),g=a(11),f=a(20),v=a(9),k=a.n(v),b=a(24),E=a.n(b),x=(a(71),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={linkPath:"/image?name="+e.src,imageName:"/api/getsmall/"+e.src},n}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(g.b,{to:this.state.linkPath},r.a.createElement("img",{src:this.state.imageName,className:"contentThumbnail"}))}}]),a}(r.a.Component)),w=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleSocket=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=E()("/homesystem"),n.setState({socket:t}),t.on("newUpload",function(){var e=Object(i.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=n.state.imageList).unshift({name:t.imageName}),n.setState({imageList:a}),n.forceUpdate();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)}))),n.getSmallImages=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("/api/getsmall");case 2:t=e.sent,console.log(t.data),n.setState({imageList:t.data});case 5:case"end":return e.stop()}}),e)}))),n.state={socket:null,imageList:null},n}return Object(m.a)(a,[{key:"componentWillUnmount",value:function(){this.state.socket&&this.state.socket.disconnect()}},{key:"componentDidMount",value:function(){this.getSmallImages(),this.handleSocket()}},{key:"render",value:function(){return this.state.imageList?r.a.createElement("div",{className:"contentContainer"},this.state.imageList.map((function(e){return r.a.createElement(x,{key:e.name,src:e.name})}))):r.a.createElement("div",null,"Loading...")}}]),a}(r.a.Component),j=a(156),C=a(157),N=(a(29),a(139),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleLogout=function(e){e.preventDefault(),console.log(n.props.history),localStorage.removeItem("token"),n.props.setAuthFalse(),n.setState({redirect:"/"})},n.renderRedirect=function(){if(n.state.redirect)return n.setState({redirect:null}),r.a.createElement(f.a,{to:n.state.redirect})},n.state={redirect:null},n}return Object(m.a)(a,[{key:"render",value:function(){return this.state.redirect?r.a.createElement("div",null,this.renderRedirect()):this.props.isAuth?r.a.createElement(j.a,{className:"navColor"},r.a.createElement(C.a,{className:"mr-auto"},r.a.createElement(g.c,{exact:!0,to:"/",className:"nav-link navColorChange"},"Home"),r.a.createElement(g.c,{exact:!0,to:"/upload",className:"nav-link navColorChange"},"Upload"),r.a.createElement(g.c,{exact:!0,to:"/myimages",className:"nav-link navColorChange"},"My-Images")),r.a.createElement(C.a,null,r.a.createElement(g.c,{onClick:this.handleLogout,to:"/",className:"nav-link navColorChange"},"Logout"))):r.a.createElement(j.a,{className:"navColor"},r.a.createElement(C.a,{className:"mr-auto"},r.a.createElement(g.c,{exact:!0,to:"/",className:"nav-link navColorChange"},"Home")),r.a.createElement(C.a,null,r.a.createElement(g.c,{exact:!0,to:"/login",className:"nav-link navColorChange"},"Login"),r.a.createElement(g.c,{exact:!0,to:"/signup",className:"nav-link navColorChange"},"Sign Up")))}}]),a}(r.a.Component)),O=(a(142),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleUsernameChange=function(e){n.setState({username:e.target.value})},n.handlePasswordChange=function(e){n.setState({password:e.target.value})},n.handleSubmit=function(){var e=Object(i.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,k.a.post("/api/usercontroller/register",{username:n.state.username,password:n.state.password});case 4:a=e.sent,localStorage.setItem("token",a.data.token),n.props.setAuthTrue(),n.setState({redirect:"/"}),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),console.log(e.t0.response),400===e.t0.response.status&&n.setState({error:e.t0.response.data.msg});case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),n.state={username:"",password:"",error:null,redirect:null},n}return Object(m.a)(a,[{key:"render",value:function(){return this.state.redirect?r.a.createElement(f.a,{to:this.state.redirect}):r.a.createElement("div",{className:"container-fluid h-100"},r.a.createElement("div",{className:"row justify-content-center align-items-center h-100"},r.a.createElement("div",{className:"col col-sm-6 col-md-6 col-lg-4 col-xl-3 specialBox"},r.a.createElement("h3",null,"Sign Up Form"),r.a.createElement("input",{onChange:this.handleUsernameChange,className:"form-control form-control-lg",placeholder:"Username",type:"text"}),r.a.createElement("input",{onChange:this.handlePasswordChange,className:"form-control form-control-lg",placeholder:"Password",type:"password"}),r.a.createElement("p",{style:{color:"red"}},this.state.error),r.a.createElement("button",{onClick:this.handleSubmit,className:"btn-lg btn-block signupButton"},"Sign Up"))))}}]),a}(r.a.Component)),S=(a(143),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleUsernameChange=function(e){n.setState({username:e.target.value})},n.handlePasswordChange=function(e){n.setState({password:e.target.value})},n.handleSubmit=function(){var e=Object(i.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,k.a.post("/api/usercontroller/login",{username:n.state.username,password:n.state.password});case 4:a=e.sent,localStorage.setItem("token",a.data.token),n.props.setAuthTrue(),n.setState({redirect:"/"}),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),console.log(e.t0.response),400===e.t0.response.status&&n.setState({error:e.t0.response.data.msg});case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),n.state={username:"",password:"",error:null,redirect:null},n}return Object(m.a)(a,[{key:"render",value:function(){return this.state.redirect?r.a.createElement(f.a,{to:this.state.redirect}):r.a.createElement("div",{className:"container-fluid h-100"},r.a.createElement("div",{className:"row justify-content-center align-items-center h-100"},r.a.createElement("div",{className:"col col-sm-6 col-md-6 col-lg-4 col-xl-3 specialBox"},r.a.createElement("h3",null,"Log In Form"),r.a.createElement("input",{onChange:this.handleUsernameChange,className:"form-control form-control-lg",placeholder:"Username",type:"text"}),r.a.createElement("input",{onChange:this.handlePasswordChange,className:"form-control form-control-lg",placeholder:"Password",type:"password"}),r.a.createElement("p",{style:{color:"red"}},this.state.error),r.a.createElement("button",{onClick:this.handleSubmit,className:"btn-lg btn-block loginButton"},"Log In"))))}}]),a}(r.a.Component)),y=(a(144),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleImageSelect=function(e){n.setState({file:e.target.files[0]})},n.handleUpload=Object(i.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("image",n.state.file),e.prev=2,e.next=5,k.a.post("/api/upload",t,{headers:{"x-auth-token":localStorage.getItem("token")}});case 5:a=e.sent,console.log(a.data.name),n.setState({uploadCompleted:a.data.name}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),401===e.t0.response.status&&n.setState({error:e.t0.response.data.msg});case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),n.state={file:null,uploadCompleted:null,error:null},n}return Object(m.a)(a,[{key:"render",value:function(){return this.state.uploadCompleted?r.a.createElement(f.a,{to:"/image?name="+this.state.uploadCompleted}):r.a.createElement("div",{className:"container-fluid h-100"},r.a.createElement("div",{className:"row justify-content-center align-items-center h-100"},r.a.createElement("div",{className:"col col-sm-6 col-md-6 col-lg-4 col-xl-3 specialBox"},r.a.createElement("h3",null,"Upload Form"),r.a.createElement("input",{type:"file",className:"form-control form-control-lg",onChange:this.handleImageSelect}),r.a.createElement("p",{style:{color:"red"}},this.state.error),r.a.createElement("button",{className:"btn-lg btn-block uploadButton",onClick:this.handleUpload},"Upload"))))}}]),a}(r.a.Component)),A=a(82),I=a.n(A);a(73);function L(e){return r.a.createElement("div",{className:"comment"},r.a.createElement("div",{className:"commentUser"},e.comment.username),r.a.createElement("div",null,e.comment.comment))}var U=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).getImageData=Object(i.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/imagedata/"+n.state.imageName);case 3:t=e.sent,a=t.data,n.setState({username:a.username.username,likes:a.likes,dislikes:a.dislikes,comments:a.comments}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),n.handleSocket=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=E()("/commentsystem")).on("connect",function(){var e=Object(i.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.emit("joinRoom",{room:n.state.imageName});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.on("newComment",function(){var e=Object(i.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=n.state.comments).unshift(t),n.setState({comments:a});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.on("newVote",function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({likes:t.likes,dislikes:t.dislikes});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.setState({socket:t});case 5:case"end":return e.stop()}}),e)}))),n.handleTextAreaChange=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n.setState({text:t.target.value});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleSubmitButton=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.post("/api/imagedata/newcomment",{auth_token:localStorage.getItem("token"),imageName:n.state.imageName,comment:n.state.text});case 3:200===e.sent.status&&(n.setState({text:null}),document.getElementById("commentTextArea").value=""),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),n.handleLike=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("token")){e.next=11;break}return e.prev=1,e.next=4,k.a.post("/api/imagedata/vote",{auth_token:localStorage.getItem("token"),imageName:n.state.imageName,vote:!0});case 4:200===(t=e.sent).status&&n.setState({likes:t.data.likes,dislikes:t.data.dislikes}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),n.handleDislike=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("token")){e.next=11;break}return e.prev=1,e.next=4,k.a.post("/api/imagedata/vote",{auth_token:localStorage.getItem("token"),imageName:n.state.imageName,vote:!1});case 4:200===(t=e.sent).status&&n.setState({likes:t.data.likes,dislikes:t.data.dislikes}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),n.state={imageName:e.imageName,username:null,likes:null,dislikes:null,text:null,socket:null,comments:[]},n}return Object(m.a)(a,[{key:"componentWillUnmount",value:function(){this.state.socket&&this.state.socket.disconnect()}},{key:"componentDidMount",value:function(){this.getImageData(),this.handleSocket()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("button",{className:"ratingButton",onClick:this.handleLike},"Like"),r.a.createElement("div",{className:"ratingCounter"},this.state.likes),r.a.createElement("button",{className:"ratingButton",onClick:this.handleDislike},"Dislike"),r.a.createElement("div",{className:"ratingCounter"},this.state.dislikes),r.a.createElement("p",null,"Image posted by: ",this.state.username),r.a.createElement("div",{className:"commentBar"},"Comment Below"),r.a.createElement("div",{className:"newCommentBox"},r.a.createElement("textarea",{id:"commentTextArea",value:this.state.value,className:"newComment",placeholder:"Comment here...",onChange:this.handleTextAreaChange}),r.a.createElement("button",{className:"commentSubmitButton",onClick:this.handleSubmitButton},"Submit")),this.state.comments.map((function(e){return r.a.createElement(L,{key:e._id,comment:e})})))}}]),a}(r.a.Component),B=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={imageName:I.a.parse(n.props.location.search).name},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){console.log(this.state.imageName)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("img",{src:"/api/getimage/"+this.state.imageName,className:"imageDisplay"}),r.a.createElement(U,{imageName:this.state.imageName}))}}]),a}(r.a.Component),D=(a(74),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={linkPath:"/image?name="+e.src,imageName:"/api/getsmall/"+e.src},n}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(g.b,{to:this.state.linkPath},r.a.createElement("img",{src:this.state.imageName,className:"contentThumbnail"}))}}]),a}(r.a.Component)),T=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).getSmallImages=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("/api/private/smallimages",{headers:{"x-auth-token":localStorage.getItem("token")}});case 2:t=e.sent,console.log(t.data),n.setState({imageList:t.data});case 5:case"end":return e.stop()}}),e)}))),n.state={imageList:null},n}return Object(m.a)(a,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){this.getSmallImages()}},{key:"render",value:function(){return this.state.imageList?r.a.createElement("div",{className:"contentContainer"},this.state.imageList.map((function(e){return r.a.createElement(D,{key:e.name,src:e.name})}))):r.a.createElement("div",null,"Loading...")}}]),a}(r.a.Component),F=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(i.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("token"))){e.next=13;break}return e.prev=2,e.next=5,k.a.post("/api/usercontroller/user",{auth_token:t});case 5:a=e.sent,console.log(a),a.data&&n.setAuthTrue(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),401===e.t0.response.status&&(n.setAuthFalse(),localStorage.removeItem("token"));case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),n.setAuthTrue=function(){n.setState({isAuth:!0})},n.setAuthFalse=function(){n.setState({isAuth:!1})},n.state={isAuth:!1},n.setAuthTrue=n.setAuthTrue.bind(Object(h.a)(n)),n.setAuthFalse=n.setAuthFalse.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(g.a,null,r.a.createElement(N,{isAuth:this.state.isAuth,setAuthFalse:this.setAuthFalse}),r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"/",component:w}),r.a.createElement(f.b,{exact:!0,path:"/upload"},r.a.createElement(y,{isAuth:this.state.isAuth})),r.a.createElement(f.b,{exact:!0,path:"/login"},r.a.createElement(S,{setAuthTrue:this.setAuthTrue})),r.a.createElement(f.b,{exact:!0,path:"/signup"},r.a.createElement(O,{setAuthTrue:this.setAuthTrue})),">",r.a.createElement(f.b,{exact:!0,path:"/image",component:B}),r.a.createElement(f.b,{exact:!0,path:"/myimages",component:T})))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},71:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},83:function(e,t,a){e.exports=a(153)}},[[83,1,2]]]);
//# sourceMappingURL=main.06894171.chunk.js.map